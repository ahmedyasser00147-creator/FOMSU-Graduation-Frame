const canvas = document.getElementById("canvas");const ctx = canvas.getContext("2d");/* أبعاد الفريم الأصلية */canvas.width = 1080;canvas.height = 1350;let img = new Image();let scale = 1;let rotation = 0;/* مركز الفريم */let x = 540;let y = 675;/* رفع الصورة */document.getElementById("upload").addEventListener("change", e => {  const reader = new FileReader();  reader.onload = () => {    img.src = reader.result;    img.onload = draw;  };  reader.readAsDataURL(e.target.files[0]);});/* Zoom */document.getElementById("zoom").addEventListener("input", e => {  scale = e.target.value;  draw();});/* Rotate */document.getElementById("rotate").addEventListener("input", e => {  rotation = e.target.value * Math.PI / 180;  draw();});/* Dragging */let dragging = false;let lastX, lastY;canvas.addEventListener("mousedown", e => {  dragging = true;  lastX = e.offsetX * (canvas.width / canvas.clientWidth);  lastY = e.offsetY * (canvas.height / canvas.clientHeight);});canvas.addEventListener("mousemove", e => {  if (!dragging) return;  const currentX = e.offsetX * (canvas.width / canvas.clientWidth);  const currentY = e.offsetY * (canvas.height / canvas.clientHeight);  x += currentX - lastX;  y += currentY - lastY;  lastX = currentX;  lastY = currentY;  draw();});canvas.addEventListener("mouseup", () => dragging = false);canvas.addEventListener("mouseleave", () => dragging = false);/* رسم الصورة */function draw() {  ctx.clearRect(0, 0, canvas.width, canvas.height);  if (!img.src) return;  ctx.save();  ctx.translate(x, y);  ctx.rotate(rotation);  ctx.scale(scale, scale);  ctx.drawImage(img, -img.width / 2, -img.height / 2);  ctx.restore();}/* تحميل الصورة بأعلى جودة */document.getElementById("download").addEventListener("click", () => {  const link = document.createElement("a");  link.download = "graduation_1080x1350.png";  link.href = canvas.toDataURL("image/png", 1.0);  link.click();});